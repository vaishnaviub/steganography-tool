<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CipherVault - Steganography Tool</title>
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon1.ico') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div>
                    <h1 class="text-4xl font-bold tracking-wide">
                        <span class="text-primary-color">üîêCipher</span><span class="text-accent-color">Vault</span>
                      </h1>
                      <p class="text-secondary-color text-base mt-1">
                        Hide and reveal messages inside images securely
                      </p>
                </div>
            </div>
        </header>

        <!-- Toast Notification -->
        <div id="toast" class="toast"></div>

        <main>
            <div class="tabs-wrapper">
                <div class="tabs">
                    <button class="tab-btn active" data-tab="encode">Encode</button>
                    <button class="tab-btn" data-tab="decode">Decode</button>
                </div>
                <button id="themeToggle" class="theme-toggle" aria-label="Toggle dark mode">
                    <i class="fas fa-moon"></i>
                    <i class="fas fa-sun" style="display: none;"></i>
                </button>
            </div>

            <div class="tab-content">
                <!-- Encode Tab -->
                <div id="encode" class="tab-pane active">
                    <div class="form-group">
                        <div class="form-group-header">
                            <label>Upload Images:</label>
                        </div>
                        <div class="drop-zone" id="encodeDropZone">
                            <span class="drop-zone__prompt">Drop images here or click to upload</span>
                            <input type="file" name="image" id="encodeImage" class="drop-zone__input" accept="image/*" multiple>
                        </div>
                        <div class="help-text">
                            Supported formats: JPG, PNG, BMP, WebP, TIFF. Max 10MB per file.
                        </div>
                    </div>
                    
                    <!-- Batch Processing Options -->
                    <div class="form-group" id="batchOptions" style="display: none;">
                        <div class="form-group-header">
                            <label>Batch Processing:</label>
                        </div>
                        <div class="batch-options-grid">
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" id="applyToAll" checked>
                                <label class="form-check-label" for="applyToAll">Apply same message to all images</label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Image Editor -->
                    <div class="form-group" id="imageEditor" style="display: none;">
                        <div class="form-group-header">
                            <label>Image Editor:</label>
                        </div>
                        <div class="editor-container">
                            <div class="editor-toolbar">
                                <button type="button" class="btn btn-sm btn-outline-secondary" id="rotateLeft" title="Rotate 90¬∞ left">
                                    <i class="fas fa-undo"></i>
                                </button>
                                <button type="button" class="btn btn-sm btn-outline-secondary" id="rotateRight" title="Rotate 90¬∞ right">
                                    <i class="fas fa-redo"></i>
                                </button>
                                <button type="button" class="btn btn-sm btn-outline-secondary" id="cropBtn" title="Crop image">
                                    <i class="fas fa-crop"></i>
                                </button>
                                <div class="btn-group" role="group">
                                    <button type="button" class="btn btn-sm btn-outline-secondary" id="brightnessDown" title="Decrease brightness">
                                        <i class="fas fa-sun"></i> -
                                    </button>
                                    <button type="button" class="btn btn-sm btn-outline-secondary" id="brightnessReset" title="Reset adjustments">
                                        <i class="fas fa-sync-alt"></i>
                                    </button>
                                    <button type="button" class="btn btn-sm btn-outline-secondary" id="brightnessUp" title="Increase brightness">
                                        <i class="fas fa-sun"></i> +
                                    </button>
                                </div>
                            </div>
                            <div class="editor-canvas-container">
                                <canvas id="editorCanvas"></canvas>
                                <div id="cropOverlay" class="crop-overlay">
                                    <div class="crop-selection"></div>
                                    <div class="crop-handle nw" data-direction="nw"></div>
                                    <div class="crop-handle ne" data-direction="ne"></div>
                                    <div class="crop-handle sw" data-direction="sw"></div>
                                    <div class="crop-handle se" data-direction="se"></div>
                                </div>
                            </div>
                            <div class="editor-status">
                                <span id="imageInfo">No image loaded</span>
                                <div class="btn-group ms-auto">
                                    <button type="button" class="btn btn-sm btn-outline-secondary" id="saveChanges">
                                        <i class="fas fa-save"></i> Apply Changes
                                    </button>
                                    <button type="button" class="btn btn-sm btn-outline-danger" id="cancelChanges">
                                        <i class="fas fa-times"></i> Cancel
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <div class="form-group-header">
                            <label for="message">Secret Message:</label>
                        </div>
                        <div class="help-text">
                            The message will be hidden inside the image you upload. Maximum length depends on the image size.
                        </div>
                        <textarea id="message" placeholder="Type your secret message here..." required
                                 aria-describedby="messageHelp"></textarea>
                    </div>
                    
                    <div class="form-group" id="passwordGroup" style="display: none;">
                        <div class="form-group-header">
                            <label for="password">Password (optional):</label>
                        </div>
                        <div class="help-text">
                            If you set a password, the recipient will need it to decode the message. Keep it safe!
                        </div>
                        <div class="password-input-group">
                            <input type="password" 
                                   id="password" 
                                   class="form-control" 
                                   placeholder="Enter a password to encrypt your message"
                                   aria-describedby="passwordHelp"
                                   autocomplete="new-password"
                                   oninput="checkPasswordStrength(this.value)">
                            <button type="button" class="toggle-password" aria-label="Toggle password visibility" data-toggle-tooltip="Show/hide password">
                                <i class="fas fa-eye"></i>
                                <span class="tooltip">Toggle visibility</span>
                            </button>
                        </div>
                        <div class="password-strength">
                            <div class="password-strength-meter" id="passwordStrengthMeter"></div>
                        </div>
                        <div class="password-strength-text" id="passwordStrengthText"></div>
                        <small id="passwordHelp" class="form-text">For added security, set a password to encrypt your message</small>
                    </div>
                    
                    <div class="progress-container" id="encodeProgress">
                        <div class="progress-bar" id="encodeProgressBar"></div>
                        <div class="progress-text" id="encodeProgressText">0%</div>
                    </div>
                    <div class="btn-group">
                        <button id="encodeBtn" class="btn btn-primary">Encode Message</button>
                        <a id="downloadBtn" class="btn btn-secondary" style="display: none;" download>Download Encoded Image</a>
                    </div>
                </div>

                <!-- Decode Tab -->
                <div id="decode" class="tab-pane">
                    <div class="drop-zone" id="decodeDropZone">
                        <span class="drop-zone__prompt">Drop encoded image here or click to upload</span>
                        <input type="file" name="image" id="decodeImage" class="drop-zone__input" accept="image/*">
                    </div>
                    
                    <div class="form-group">
                        <div class="form-group-header">
                            <label for="decodePassword">Password (if used for encoding):</label>
                        </div>
                        <div class="help-text">
                            Only required if the message was password-protected during encoding.
                        </div>
                        <div class="password-input-group">
                            <input type="password" 
                                   id="decodePassword" 
                                   class="form-control" 
                                   placeholder="Enter password if the message is encrypted"
                                   aria-describedby="decodePasswordHelp">
                            <button type="button" class="toggle-password" data-target="decodePassword" aria-label="Toggle password visibility" data-toggle-tooltip="Show/hide password">
                                <i class="fas fa-eye"></i>
                                <span class="tooltip">Toggle visibility</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Decoded Message:</label>
                        <div id="decodedMessage" class="message-box">
                            Your hidden message will appear here...
                        </div>
                    </div>
                    
                    <div class="progress-container" id="decodeProgress">
                        <div class="progress-bar" id="decodeProgressBar"></div>
                        <div class="progress-text" id="decodeProgressText">0%</div>
                    </div>
                    
                    <button id="decodeBtn" class="btn btn-primary">Decode Message</button>
                </div>
            </div>
        </main>

        <div id="toast" class="toast"></div>
    </div>

    <footer class="footer">
        <div class="social-share">
            <p>Share this tool:</p>
            <div class="social-buttons">
                <a href="#" class="social-btn twitter" data-share="twitter" title="Share on Twitter">
                    <i class="fab fa-twitter"></i>
                </a>
                <a href="#" class="social-btn instagram" data-share="instagram" title="Share on Instagram">
                    <i class="fab fa-instagram"></i>
                </a>
                <a href="#" class="social-btn linkedin" data-share="linkedin" title="Share on LinkedIn">
                    <i class="fab fa-linkedin-in"></i>
                </a>
                <a href="#" class="social-btn whatsapp" data-share="whatsapp" title="Share on WhatsApp">
                    <i class="fab fa-whatsapp"></i>
                </a>
                <a href="#" class="social-btn copy-link" data-share="copy" title="Copy link">
                    <i class="fas fa-link"></i>
                </a>
            </div>
        </div>
        <p class="copyright">¬© 2025 Steganography Tool. All rights reserved.</p>
    </footer>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
